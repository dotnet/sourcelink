// Copyright (c) Microsoft.  All Rights Reserved.  Licensed under the Apache License, Version 2.0.  See License.txt in the project root for license information.
#if !NET461

using System;
using System.Diagnostics;
using RuntimeEnvironment = Microsoft.DotNet.PlatformAbstractions.RuntimeEnvironment;

namespace Microsoft.Build.Tasks.Git
{
    internal sealed class RuntimeIdMap
    {
        public static string GetNativeLibraryDirectoryName()
        {
#if DEBUG
            Debug.Assert(s_directories.Length == s_rids.Length);

            for (int i = 1; i < s_rids.Length; i++)
            {
                Debug.Assert(StringComparer.Ordinal.Compare(s_rids[i - 1], s_rids[i]) < 0);
            }
#endif
            var runtimeIdentifier = RuntimeEnvironment.GetRuntimeIdentifier();
            int index = Array.BinarySearch(s_rids, runtimeIdentifier, StringComparer.Ordinal);
            if (index < 0)
            {
                throw new PlatformNotSupportedException(runtimeIdentifier);
            }

            return s_directories[index];
        }

        // The following tables were generated by scripts/RuntimeIdMapGenerator.csx.
        // Regenerate when upgrading LibGit2Sharp to a new version that supports more platforms.

        private static readonly string[] s_rids = new[]
        {
            "alpine-x64",
            "alpine-x64-corert",
            "alpine.3.6-x64",
            "alpine.3.6-x64-corert",
            "alpine.3.7-x64",
            "alpine.3.7-x64-corert",
            "centos-x64",
            "centos-x64-corert",
            "centos.7-x64",
            "centos.7-x64-corert",
            "debian-x64",
            "debian-x64-corert",
            "debian.8-x64",
            "debian.8-x64-corert",
            "debian.9-x64",
            "debian.9-x64-corert",
            "fedora-x64",
            "fedora-x64-corert",
            "fedora.23-x64",
            "fedora.23-x64-corert",
            "fedora.24-x64",
            "fedora.24-x64-corert",
            "fedora.25-x64",
            "fedora.25-x64-corert",
            "fedora.26-x64",
            "fedora.26-x64-corert",
            "fedora.27-x64",
            "fedora.27-x64-corert",
            "fedora.28-x64",
            "fedora.28-x64-corert",
            "gentoo-x64",
            "gentoo-x64-corert",
            "linux-musl-x64",
            "linux-musl-x64-corert",
            "linux-x64",
            "linux-x64-corert",
            "linuxmint.17-x64",
            "linuxmint.17-x64-corert",
            "linuxmint.17.1-x64",
            "linuxmint.17.1-x64-corert",
            "linuxmint.17.2-x64",
            "linuxmint.17.2-x64-corert",
            "linuxmint.17.3-x64",
            "linuxmint.17.3-x64-corert",
            "linuxmint.18-x64",
            "linuxmint.18-x64-corert",
            "linuxmint.18.1-x64",
            "linuxmint.18.1-x64-corert",
            "linuxmint.18.2-x64",
            "linuxmint.18.2-x64-corert",
            "linuxmint.18.3-x64",
            "linuxmint.18.3-x64-corert",
            "linuxmint.19-x64",
            "linuxmint.19-x64-corert",
            "ol-x64",
            "ol-x64-corert",
            "ol.7-x64",
            "ol.7-x64-corert",
            "ol.7.0-x64",
            "ol.7.0-x64-corert",
            "ol.7.1-x64",
            "ol.7.1-x64-corert",
            "ol.7.2-x64",
            "ol.7.2-x64-corert",
            "ol.7.3-x64",
            "ol.7.3-x64-corert",
            "ol.7.4-x64",
            "ol.7.4-x64-corert",
            "opensuse-x64",
            "opensuse-x64-corert",
            "opensuse.13.2-x64",
            "opensuse.13.2-x64-corert",
            "opensuse.42.1-x64",
            "opensuse.42.1-x64-corert",
            "opensuse.42.2-x64",
            "opensuse.42.2-x64-corert",
            "opensuse.42.3-x64",
            "opensuse.42.3-x64-corert",
            "osx",
            "osx-corert",
            "osx-x64",
            "osx-x64-corert",
            "osx.10.10",
            "osx.10.10-corert",
            "osx.10.10-x64",
            "osx.10.10-x64-corert",
            "osx.10.11",
            "osx.10.11-corert",
            "osx.10.11-x64",
            "osx.10.11-x64-corert",
            "osx.10.12",
            "osx.10.12-corert",
            "osx.10.12-x64",
            "osx.10.12-x64-corert",
            "osx.10.13",
            "osx.10.13-corert",
            "osx.10.13-x64",
            "osx.10.13-x64-corert",
            "rhel-x64",
            "rhel-x64-corert",
            "rhel.6-x64",
            "rhel.6-x64-corert",
            "rhel.7-x64",
            "rhel.7-x64-corert",
            "rhel.7.0-x64",
            "rhel.7.0-x64-corert",
            "rhel.7.1-x64",
            "rhel.7.1-x64-corert",
            "rhel.7.2-x64",
            "rhel.7.2-x64-corert",
            "rhel.7.3-x64",
            "rhel.7.3-x64-corert",
            "rhel.7.4-x64",
            "rhel.7.4-x64-corert",
            "sles-x64",
            "sles-x64-corert",
            "sles.12-x64",
            "sles.12-x64-corert",
            "sles.12.1-x64",
            "sles.12.1-x64-corert",
            "sles.12.2-x64",
            "sles.12.2-x64-corert",
            "sles.12.3-x64",
            "sles.12.3-x64-corert",
            "ubuntu-x64",
            "ubuntu-x64-corert",
            "ubuntu.14.04-x64",
            "ubuntu.14.04-x64-corert",
            "ubuntu.14.10-x64",
            "ubuntu.14.10-x64-corert",
            "ubuntu.15.04-x64",
            "ubuntu.15.04-x64-corert",
            "ubuntu.15.10-x64",
            "ubuntu.15.10-x64-corert",
            "ubuntu.16.04-x64",
            "ubuntu.16.04-x64-corert",
            "ubuntu.16.10-x64",
            "ubuntu.16.10-x64-corert",
            "ubuntu.17.04-x64",
            "ubuntu.17.04-x64-corert",
            "ubuntu.17.10-x64",
            "ubuntu.17.10-x64-corert",
            "ubuntu.18.04-x64",
            "ubuntu.18.04-x64-corert",
            "win-x64",
            "win-x64-aot",
            "win-x64-corert",
            "win-x86",
            "win-x86-aot",
            "win-x86-corert",
            "win10-x64",
            "win10-x64-aot",
            "win10-x64-corert",
            "win10-x86",
            "win10-x86-aot",
            "win10-x86-corert",
            "win7-x64",
            "win7-x64-aot",
            "win7-x64-corert",
            "win7-x86",
            "win7-x86-aot",
            "win7-x86-corert",
            "win8-x64",
            "win8-x64-aot",
            "win8-x64-corert",
            "win8-x86",
            "win8-x86-aot",
            "win8-x86-corert",
            "win81-x64",
            "win81-x64-aot",
            "win81-x64-corert",
            "win81-x86",
            "win81-x86-aot",
            "win81-x86-corert",
        };

        private static readonly string[] s_directories = new[]
        {
            "alpine-x64",
            "alpine-x64",
            "alpine-x64",
            "alpine-x64",
            "alpine-x64",
            "alpine-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "debian.9-x64",
            "debian.9-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "fedora-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "osx",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "rhel-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "linux-x64",
            "win-x64",
            "win-x64",
            "win-x64",
            "win-x86",
            "win-x86",
            "win-x86",
            "win-x64",
            "win-x64",
            "win-x64",
            "win-x86",
            "win-x86",
            "win-x86",
            "win-x64",
            "win-x64",
            "win-x64",
            "win-x86",
            "win-x86",
            "win-x86",
            "win-x64",
            "win-x64",
            "win-x64",
            "win-x86",
            "win-x86",
            "win-x86",
            "win-x64",
            "win-x64",
            "win-x64",
            "win-x86",
            "win-x86",
            "win-x86",
        };
    }
}
#endif